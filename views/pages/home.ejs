<html>

<head>
    <title>Walmart Deals</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha2256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.min.js"></script>
    <script>
        function addToList() {
            var target = event.target || event.srcElement;
            var id = target.id;

            // console.log("hello", $(this).closest("#price"));
            var stuff = "#price" + id;
            var theId = "#newPrice" + id;
            console.log(theId);

            var price = $(stuff).html();

            if ($(theId).html() != undefined) {
                price = $(theId).html();
                price = price.slice(1);
            }

            var myThing = "#" + id.toLowerCase();
            var url = $(myThing).attr('src');;

            console.log(myThing);
            console.log(url);

            var params = {
                name: id,
                price: price
            };

            console.log(params);

            $.post("/myList", params, function (result) {
                if (result && result.success) {
                    $("#status").text("Success");
                } else {
                    $("#status").text("Error");
                }
            })
        }
    </script>
</head>

<body>
    <div class="ui secondary  menu">
        <a class="item" style="color:#1678c2; font-size:30px;" href="/">
            My Grocery List
        </a>
        <a class="item" href="/myList">
            My List
        </a>
        <div class="right menu">
            <a class="ui item" href="/pages/logout.html">
                Logout
            </a>
            <a class="ui item" href="login.html">
                Login/Signup
            </a>
        </div>
    </div>

    <div class="ui grid" style="margin-left:30px;">
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="banana" src="<%= banana.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Banana</a>
                    <div class="description"> $
                        <i id="priceBanana">
                            <%= banana.salePrice %>
                        </i>
                        <% if (result.rows[0].price.slice(1) > banana.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPriceBanana">
                                    <%=result.rows[0].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Banana" class="ui primary button" onclick="addToList(this)" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="cereal" src="<%= cereal.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Cereal</a>
                    <div class="description"> $
                        <i id="priceCereal">
                            <%= cereal.salePrice %>
                        </i>
                        <% if (result.rows[1].price.slice(1) > cereal.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPriceCereal">
                                    <%=result.rows[1].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Cereal" class="ui primary button" onclick="addToList(this)" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="peaches" src="<%= peaches.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Peaches</a>
                    <div class="description"> $
                        <i id="pricePeaches">
                            <%= peaches.salePrice %>
                        </i>
                        <% if (result.rows[2].price.slice(1) > peaches.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPricePeaches">
                                    <%=result.rows[2].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Peaches" class="ui primary button" onclick="addToList(this)" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="almondmilk" src="<%= almondmilk.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Almond Milk</a>
                    <div class="description"> $
                        <i id="priceAlmondmilk">
                            <%= almondmilk.salePrice %>
                        </i>
                        <% if (result.rows[3].price.slice(1) > almondmilk.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPriceAlmondmilk">
                                    <%=result.rows[3].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Almondmilk" class="ui primary button" onclick="addToList()" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="rice" src="<%= rice.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Peaches</a>
                    <div class="description"> $
                        <i id="priceRice">
                            <%= rice.salePrice %>
                        </i>
                        <% if (result.rows[4].price.slice(1) > rice.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPriceRice">
                                    <%=result.rows[4].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Rice" class="ui primary button" onclick="addToList(this)" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="pasta" src="<%= pasta.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Pasta</a>
                    <div class="description"> $
                        <i id="pricePasta">
                            <%= pasta.salePrice %>
                        </i>
                        <% if (result.rows[5].price.slice(1) > pasta.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPricePasta">
                                    <%=result.rows[5].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Pasta" class="ui primary button" onclick="addToList(this)" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="potatoes" src="<%= potatoes.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Potatoes</a>
                    <div class="description"> $
                        <i id="pricePotatoes">
                            <%= potatoes.salePrice %>
                        </i>
                        <% if (result.rows[6].price.slice(1) > potatoes.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPricePotatoes">
                                    <%=result.rows[6].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Potatoes" class="ui primary button" onclick="addToList(this)" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="juice" src="<%= juice.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Juice</a>
                    <div class="description"> $
                        <i id="priceJuice">
                            <%= juice.salePrice %>
                        </i>
                        <% if (result.rows[7].price.slice(1) > juice.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPriceJuice">
                                    <%=result.rows[7].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Juice" class="ui primary button" onclick="addToList(this)" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="tuna" src="<%= tuna.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Tuna</a>
                    <div class="description"> $
                        <i id="priceTuna">
                            <%= tuna.salePrice %>
                        </i>
                        <% if (result.rows[8].price.slice(1) > tuna.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPriceTuna">
                                    <%=result.rows[8].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Tuna" class="ui primary button" onclick="addToList(this)" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="three wide column">
            <div class="ui card">
                <div class="image">
                    <img id="oreo" src="<%= oreo.mediumImage %>">
                </div>
                <div class="content">
                    <a class="header">Oreo</a>
                    <div class="description"> $
                        <i id="priceOreo">
                            <%= peaches.salePrice %>
                        </i>
                        <% if (result.rows[9].price.slice(1) > oreo.salePrice) { %>
                            <span class="date" style="margin-left:25px; color:red;">New price:
                                <i id="newPriceOreo">
                                    <%=result.rows[9].price%>
                                </i>
                            </span>
                            <%  }%>
                    </div>
                    <div class="meta">
                        <button id="Oreo" class="ui primary button" onclick="addToList(this)" style="margin-left:25px; margin-top:10px;">
                            Add to myList
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

</body>

</html>